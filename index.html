<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¥¿æ—ç£¨æŸè®¡ç®—å™¨</title>
    <style>
        :root {
            --primary-color: #007bff;
            --primary-hover: #0056b3;
            --secondary-color: #6c757d;
            --secondary-hover: #545b62;
            --background-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-color: #333;
            --border-color: #dee2e6;
            --border-radius: 8px;
            --box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            --box-shadow-hover: 0 4px 15px rgba(0, 0, 0, 0.12);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: none;
            width: 100%;
            margin: 0 auto;
        }

        .tab {
            display: flex;
            background-color: var(--card-bg);
            box-shadow: var(--box-shadow);
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-bottom: 25px;
        }

        .tabButton {
            flex: 1;
            padding: 15px 20px;
            border: none;
            background-color: transparent;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            color: var(--text-color);
            transition: all 0.3s ease;
            position: relative;
        }

        .tabButton:hover {
            background-color: rgba(0, 123, 255, 0.1);
            color: var(--primary-color);
        }

        .tabButton.active {
            background-color: var(--primary-color);
            color: #fff;
        }

        .tabcontent {
            display: none;
            padding: 25px;
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-bottom: 20px;
            width: 100%;
        }

        .tabcontent.active {
            display: block;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-color);
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
        }

        .selector-group {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            width: 100%;
        }

        .selector-container {
            flex: 1;
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            min-width: 250px;
        }

        .selector-container h4 {
            margin-bottom: 12px;
            font-size: 15px;
            font-weight: 600;
            color: var(--text-color);
        }

        select {
            width: 100%;
            padding: 10px 12px;
            font-size: 14px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            background-color: var(--card-bg);
            transition: all 0.3s ease;
        }

        select:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }

        textarea,
        input {
            width: 100%;
            padding: 12px;
            font-size: 14px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            margin-bottom: 15px;
            transition: all 0.3s ease;
            background-color: var(--card-bg);
            resize: none;
        }

        textarea:focus,
        input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }

        .button-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            width: 100%;
        }

        .button-container button {
            flex: 1;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 500;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .button-container button.primary {
            background-color: var(--primary-color);
            color: #fff;
        }

        .button-container button.primary:hover {
            background-color: var(--primary-hover);
            transform: translateY(-1px);
            box-shadow: var(--box-shadow-hover);
        }

        .button-container button.secondary {
            background-color: var(--secondary-color);
            color: #fff;
        }

        .button-container button.secondary:hover {
            background-color: var(--secondary-hover);
            transform: translateY(-1px);
            box-shadow: var(--box-shadow-hover);
        }

        #fcTheProgress {
            width: 100%;
            height: 20px;
            background-color: #e9ecef;
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        #fcProgressBar {
            height: 100%;
            background: linear-gradient(45deg, var(--primary-color), #4dabf7);
            width: 0%;
            transition: width 0.4s ease;
            position: relative;
        }

        #fcCombinationsText {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            min-height: 200px;
            max-height: 600px;
            overflow-y: auto;
            width: 100%;
        }

        .criteria-container {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            width: 100%;
            flex-wrap: wrap;
        }

        .criteria-item {
            flex: 1;
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            text-align: center;
            min-width: 200px;
        }

        .criteria-item h4 {
            margin-bottom: 12px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-color);
        }

        .material-wear-range {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            width: 100%;
        }

        .material-wear-range div {
            flex: 1;
        }

        .material-wear-range h4 {
            font-size: 13px;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-color);
        }

        .material-types-container {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            width: 100%;
        }

        .material-type-container {
            flex: 1;
            min-width: 350px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .material-type-container:hover {
            box-shadow: var(--box-shadow-hover);
            transform: translateY(-2px);
        }

        .material-type-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .material-type-header h4 {
            margin: 0;
            font-size: 15px;
            font-weight: 600;
        }

        .material-type-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .material-type-1 {
            background-color: #007bff;
        }

        .material-type-2 {
            background-color: #28a745;
        }

        .material-type-3 {
            background-color: #dc3545;
        }

        .material-type-4 {
            background-color: #ffc107;
        }

        .material-type-5 {
            background-color: #6f42c1;
        }

        .material-type-textarea {
            height: 80px;
            font-size: 13px;
            margin-bottom: 12px;
            width: 100%;
        }

        .material-type-output {
            height: 40px;
            font-size: 13px;
            margin-bottom: 12px;
            width: 100%;
        }

        .material-type-buttons {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            width: 100%;
        }

        .material-type-buttons button {
            flex: 1;
            padding: 8px 12px;
            font-size: 12px;
            font-weight: 500;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 80px;
        }

        .material-type-buttons button.primary {
            background-color: var(--primary-color);
            color: #fff;
        }

        .material-type-buttons button.primary:hover {
            background-color: var(--primary-hover);
        }

        .material-type-buttons button.secondary {
            background-color: var(--secondary-color);
            color: #fff;
        }

        .material-type-buttons button.secondary:hover {
            background-color: var(--secondary-hover);
        }

        .result-info {
            background: var(--card-bg);
            padding: 15px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-bottom: 20px;
            text-align: center;
            font-weight: 500;
            width: 100%;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            width: 100%;
        }

        .action-buttons button {
            flex: 1;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 500;
            min-width: 120px;
        }

        
        .text-material-type-1 {
            color: #007bff;
            font-weight: bold;
        }

        .text-material-type-2 {
            color: #28a745;
            font-weight: bold;
        }

        .text-material-type-3 {
            color: #dc3545;
            font-weight: bold;
        }

        .text-material-type-4 {
            color: #ffc107;
            font-weight: bold;
        }

        .text-material-type-5 {
            color: #6f42c1;
            font-weight: bold;
        }

        .message-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            background: var(--primary-color);
            color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-hover);
            z-index: 1000;
            transform: translateX(120%);
            transition: transform 0.3s ease;
        }

        .message-toast.show {
            transform: translateX(0);
        }

        .message-toast.success {
            background: #28a745;
        }

        .message-toast.error {
            background: #dc3545;
        }

        .combination-result {
            margin-bottom: 10px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
        }

        .stats-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            width: 100%;
            flex-wrap: wrap;
        }

        .stat-item {
            flex: 1;
            background: var(--card-bg);
            padding: 15px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            text-align: center;
            min-width: 150px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 12px;
            color: var(--secondary-color);
            margin-top: 5px;
        }

        .real-time-result {
            border-left: 3px solid var(--primary-color);
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .search-container {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }

        
        .exact-match-highlight {
            color: #a70000 !important;
            background-color: #FFFF00 !important;
            padding: 2px 5px !important;
            border-radius: 3px !important;
            font-weight: bold !important;
            border: 2px solid #ff9900 !important;
            display: inline-block !important;
        }

        .normal-wear {
            color: #a70000;
            display: inline-block;
        }

        
        .search-highlight {
            background-color: #ffff76 !important;
            border: 2px solid #ffc107 !important;
            box-shadow: 0 0 10px rgba(255, 193, 7, 0.5) !important;
        }

        
        .real-time-result .exact-match-highlight {
            background-color: #FFFF00 !important;
            border: 2px solid #ff9900 !important;
        }

        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .author-info-card,
        .tool-info-card {
            transition: all 0.3s ease;
        }

        .author-info-card:hover,
        .tool-info-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-hover);
        }

        .social-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .social-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
        }

        
        @media (max-width: 768px) {
            .author-container {
                padding: 20px !important;
            }

            .social-card {
                min-width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="tab">
            <button class="tabButton active" onclick="openTab('floatCombosDiv')">ç£¨æŸè®¡ç®—</button>
            <button class="tabButton" onclick="openTab('ieee754Div')">IEEE754è½¬æ¢</button>
            <button class="tabButton" onclick="openTab('aboutAuthorDiv')">ç›˜å°¼è¥¿æ—</button>
        </div>

        <div id="floatCombosDiv" class="tabcontent active">
            <h3 class="section-title">ææ–™é…ç½®</h3>

            <div class="selector-group">
                <div class="selector-container">
                    <h4>é€‰æ‹©åˆæˆææ–™æ•°é‡</h4>
                    <select id="materialCountSelect" onchange="updateMaterialCount()">
                        <option value="5">5ä¸ªææ–™</option>
                        <option value="10">10ä¸ªææ–™</option>
                    </select>
                </div>

                <div class="selector-container">
                    <h4>é€‰æ‹©ææ–™ç§ç±»æ•°é‡</h4>
                    <select id="materialTypeCountSelect" onchange="updateMaterialTypeCount()">
                        <option value="1">1ç§ææ–™</option>
                        <option value="2">2ç§ææ–™</option>
                        <option value="3">3ç§ææ–™</option>
                        <option value="4">4ç§ææ–™</option>
                        <option value="5">5ç§ææ–™</option>
                    </select>
                </div>
            </div>

            <!-- ææ–™ç§ç±»å®¹å™¨ - é»˜è®¤æ˜¾ç¤ºææ–™ç§ç±»1 -->
            <div id="materialTypeContainers" class="material-types-container">
                <div class="material-type-container" id="materialType1">
                    <div class="material-type-header">
                        <div class="material-type-color material-type-1"></div>
                        <h4>ææ–™ç§ç±» 1</h4>
                    </div>
                    <textarea id="fcAltInput1" class="material-type-textarea"
                        placeholder="è¾“å…¥ææ–™ç§ç±» 1 çš„ç£¨æŸæ•°æ®..."></textarea>
                    <div class="material-type-buttons">
                        <button class="primary" onclick="extractAndShowFloats(1)">æå–æ•°æ®</button>
                    </div>
                    <textarea id="fcOutput1" class="material-type-output" readonly
                        placeholder="æå–çš„ææ–™æ•°æ®å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ"></textarea>
                    <textarea id="fcCumulative1" class="material-type-output" readonly
                        placeholder="ç´¯è®¡çš„ææ–™æ•°æ®å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ"></textarea>
                    <div class="material-type-buttons">
                        <button class="secondary" onclick="copyResults(1)">å¤åˆ¶æ•°æ®</button>
                        <button class="primary" onclick="mergeToTotalInput(1)">æ±‡æ€»æ•°æ®</button>
                        <button class="secondary" onclick="clearMaterialType(1)">æ¸…é™¤æ•°æ®</button>
                    </div>
                    <div class="material-wear-range">
                        <div>
                            <h4>ææ–™æœ€å°ç£¨æŸ</h4>
                            <input id="materialMinWear1" value="0.00" placeholder="æœ€å°ç£¨æŸ" />
                        </div>
                        <div>
                            <h4>ææ–™æœ€å¤§ç£¨æŸ</h4>
                            <input id="materialMaxWear1" value="0.80" placeholder="æœ€å¤§ç£¨æŸ" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="secondary" onclick="clearAllMaterialTypes()">æ¸…é™¤æ‰€æœ‰ææ–™æ•°æ®</button>
            </div>

            <h3 class="section-title">æ•°æ®å¤„ç†</h3>
            <textarea id="fcAltInput" onkeyup="fcUpdateCombinations()" rows="4"
                placeholder="åœ¨æ­¤è¾“å…¥æ€»çš„ææ–™æ•°æ®ï¼Œæˆ–ä½¿ç”¨ä¸Šæ–¹çš„æ±‡æ€»åŠŸèƒ½..."></textarea>

            <h3 class="section-title">è®¡ç®—å‚æ•°</h3>
            <div class="criteria-container">
                <div class="criteria-item">
                    <h4>æˆå“æœ€å¤§ç£¨æŸ</h4>
                    <input id="fcCmaxwearinput" placeholder="è¾“å…¥æœ€å¤§ç£¨æŸ" />
                </div>
                <div class="criteria-item">
                    <h4>æˆå“æœ€å°ç£¨æŸ</h4>
                    <input id="fcCminwearinput" value="0.00000" placeholder="è¾“å…¥æœ€å°ç£¨æŸ" />
                </div>
                <div class="criteria-item">
                    <h4>ç›®æ ‡ç£¨æŸå€¼</h4>
                    <input id="fcCdesiredfloatinput" placeholder="è¾“å…¥ç›®æ ‡ç£¨æŸ" />
                </div>
                <div class="criteria-item">
                    <h4>è®¡ç®—ç²¾ç¡®åº¦</h4>
                    <input id="fcCspecificityinput" value="0.00000001" placeholder="è¾“å…¥ç²¾ç¡®åº¦" />
                </div>
            </div>

            <div class="stats-container">
                <div class="stat-item">
                    <div class="stat-value" id="totalCombinations">0</div>
                    <div class="stat-label">æ€»ç»„åˆæ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="processedCombinations">0</div>
                    <div class="stat-label">å·²å¤„ç†</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="foundResults">0</div>
                    <div class="stat-label">æ‰¾åˆ°ç»“æœ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="timeElapsed">0s</div>
                    <div class="stat-label">è€—æ—¶</div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="primary" onclick="fcCombinations()">å¼€å§‹è®¡ç®—</button>
            </div>

            <div class="result-info" id="fcTotalCombosText">ç­‰å¾…è®¡ç®—...</div>

            <div id="fcTheProgress">
                <div id="fcProgressBar"></div>
            </div>

            <h3 class="section-title">è®¡ç®—ç»“æœ</h3>

            <div class="search-container">
                <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                    <input type="text" id="searchInput" placeholder="åœ¨ç»“æœä¸­æœç´¢..."
                        style="flex: 1; min-width: 200px; padding: 8px 12px; border: 1px solid #ccc; border-radius: 4px;">
                    <button onclick="performSearch()" class="primary" style="padding: 8px 16px;">æœç´¢</button>
                    <button onclick="prevSearch()" class="secondary" style="padding: 8px 12px;">ä¸Šä¸€ä¸ª</button>
                    <button onclick="nextSearch()" class="secondary" style="padding: 8px 12px;">ä¸‹ä¸€ä¸ª</button>
                    <span id="searchStatus" style="color: #666; font-size: 14px;">æœªæœç´¢</span>
                </div>
            </div>

            <div id="fcCombinationsText"></div>
        </div>

        <div id="ieee754Div" class="tabcontent">
            <h3 class="section-title">IEEE754 æµ®ç‚¹æ•°è½¬æ¢</h3>
            <div class="criteria-container">
                <div class="criteria-item">
                    <h4>ç›®æ ‡ç£¨æŸå€¼</h4>
                    <input id="desiredIEEEInput" placeholder="0.5" onkeyup="updateIeeeRange()" />
                </div>
                <div class="criteria-item">
                    <h4>IEEE754 è¡¨ç¤º</h4>
                    <input id="floatIEEEInput" placeholder="0.5" readonly />
                </div>
            </div>

            <div class="criteria-container">
                <div class="criteria-item">
                    <h4>æœ€å°è¾¹ç•Œå€¼</h4>
                    <input id="minIEEEinput" placeholder="0.49999998509883925" readonly />
                </div>
                <div class="criteria-item">
                    <h4>æœ€å¤§è¾¹ç•Œå€¼</h4>
                    <input id="maxIEEEinput" placeholder="0.500000029802264" readonly />
                </div>
                <div class="criteria-item">
                    <h4>ä¸­é—´å€¼</h4>
                    <input id="middleIEEEinput" placeholder="0.5000000074505516" readonly />
                </div>
            </div>
        </div>

        <div id="messageToast" class="message-toast"></div>

        <div id="aboutAuthorDiv" class="tabcontent">
            <h3 class="section-title">ç›˜å°¼è¥¿æ—</h3>

            <div class="author-container"
                style="background: var(--card-bg); padding: 30px; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
                <div
                    style="text-align: center; margin-bottom: 40px; padding: 20px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: var(--border-radius);">
                    <h3 style="color: var(--primary-color); margin-bottom: 20px;">ç›˜å°¼è¥¿æ—</h3>
                    <p style="color: var(--text-color); line-height: 1.8; font-size: 16px; margin-bottom: 15px;">
                        ä»2017å¹´å…¥å‘CSGOï¼Œæˆ‘çš„æ¸¸æˆæŠ€æœ¯ä¸€ç›´éƒ½å¾ˆå·®ï¼Œä½†æ˜¯è¿™æ—¶å€™æˆ‘å°±å¯¹æ¸¸æˆçš®è‚¤èµ·äº†å…´è¶£ï¼Œç‰¹åˆ«æ˜¯ç‚¼é‡‘ã€‚2018å¹´åœ¨æ·±æµ·å°‘å¥³å‰å®‰å¨œçš„å¸¦é¢†ä¸‹ï¼Œæ¥è§¦äº†ç‰¹æ®Šç£¨æŸï¼Œæ‰“å¼€äº†æˆ‘æ–°çš„ä¸–ç•Œã€‚
                        çŸ­ä½ç£¨æŸï¼ˆ0.5,0.0625ç­‰ï¼‰ã€è¿ç»­ç£¨æŸï¼ˆ0.006666666ç­‰ï¼‰ã€BUGç£¨æŸï¼ˆçœ‹ä¼¼é…’ç²¾0.3799999952316284å®é™…æ˜¯ç ´æŸç­‰ï¼‰å“‡å­¦é—®å¤ªå¤šäº†ã€‚ä½†æ˜¯æˆ‘ä¸ä¼šè®¡ç®—å•Šï¼Œå®é™…ä¸Šå¤–é¢å·²ç»æœ‰ä¸€ä¸ªå¾ˆç‰›é€¼å¾ˆç‰›é€¼çš„ç½‘ç«™äº†ï¼ˆandersonproescholdbellï¼‰ï¼Œ
                        å†™çš„å·¨ç‰›é€¼ï¼Œæˆ‘ä»¬éƒ½æ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šã€‚å‰å®‰å¨œä»–çŸ¥é“æœ‰è¿™ä¸ªç½‘ç«™ï¼Œä½†æ˜¯ä¸å‘Šè¯‰æˆ‘ï¼æˆ‘çœŸçš„æ˜¯ç”¨EXCELä¸€ä¸ªä¸€ä¸ªææ–™å¤åˆ¶ç²˜è´´ä¸Šå»å‡‘æ•°ï¼Œæ¯”å¦‚å…ˆä¹°8æŠŠææ–™ï¼Œç„¶åç®—å‡ºæœ€åä¸¤æŠŠå¹³å‡å€¼ï¼Œç„¶åå»æ‰¾è¿™ä¸¤æŠŠæªï¼Œ
                        æ¯”å¦‚ä¸€ä¸ªæ¯”å¹³å‡å€¼å°ä¸€ç‚¹å¦ä¸€ä¸ªå°±è¦å¤§ä¸€ç‚¹ï¼Œç‚¼éšç§˜æ‰¾ä¸åˆ°ä¿å¯†ææ–™å°±å»ç‚¼æœ€åä¸€ä¸ªä¿å¯†ï¼Œç‚¼ä¿å¯†æ‰¾ä¸åˆ°å—é™ææ–™å°±å»æ‰¾æœ€åä¸€ä¸ªå—é™...ä»¥æ­¤ç±»æ¨å“ˆå“ˆå“ˆã€‚çœŸçš„å¾ˆå¤æ‚ä½†æ˜¯ä¹æ­¤ä¸ç–²ï¼Œè€Œä¸”ä»¥è¿™ç§ç¬¨æ–¹æ³•å‡‘å‡ºäº†æˆ‘çš„ç¬¬ä¸€æŠŠéšç§˜çº§ç‰¹ç£¨æªï¼Œæ˜¯0.5ç£¨æŸçš„æ·±æµ·å¤ä»‡ï¼
                        åé¢è‡ªå·±å†™äº†ç²—ç³™çš„è®¡ç®—ç¨‹åºï¼Œä½†æ˜¯ææ–™é¡ºåºä»¥åŠIEEE754è½¬æ¢é—®é¢˜ä»¥åŠè®¡ç®—æ•ˆç‡é—®é¢˜ä¸€ç›´ååˆ†çš„å›°æ‰°æˆ‘ï¼Œåé¢æˆ‘æ‰çŸ¥é“äº†andersonproescholdbellé‚£ä¸ªç½‘ç«™ï¼ŒåŒ…æ‹¬ææ–™æ”¾çš„é¡ºåºè¿™äº›é—®é¢˜å…¨éƒ¨è€ƒè™‘è¿›å»äº†ï¼Œå·¨äººï¼Œè†œæ‹œï¼
                        åé¢ä¸€åº¦è‡ªä»¥ä¸ºæ˜¯è§‰å¾—è‡ªå·±ç‚¼é‡‘è¿™æ–¹é¢å¤©ä¸‹æ— æ•Œã€‚ç›´åˆ°äº†è§£åˆ°è¯ç”Ÿè¿œå¤æ—¶æœŸçš„ç¬¬ä¸€é¾™ç‹™0.0000133742069æ—¶ï¼Œä¸€ç¬é—´æ‰æ˜ç™½ä»€ä¹ˆæ˜¯äº•åº•ä¹‹è›™ã€ç®¡ä¸­çª¥è±¹ã€‚ç°åœ¨ï¼Œå…¨æ–°çš„ææ–™ç£¨æŸè®¡ç®—æ–¹å¼ï¼Œå…¨æ–°çš„äº”åˆä¸€ç‚¼é‡‘æ‰‹å¥—å’Œåˆ€çš®ï¼Œæ˜¯æˆ‘å›æŠ¥ç‰¹æ®Šç£¨æŸçš„æ—¶å€™äº†ï¼

                    </p>
                    <p style="color: var(--text-color); line-height: 1.8; font-size: 16px;">
                        å°‘å¹´ï¼Œç‰¹ç£¨çš„å¤§é—¨ä¸ºä½ æ•å¼€ï¼Œè¿æ¥ä½ çš„0.06666666æ½˜å¤šæ‹‰æ‰‹å¥—ï¼Œè¿æ¥ä½ çš„0.000888888ç»¿å®çŸ³è´è¶åˆ€å§ï¼
                    </p>
                </div>

                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 40px;">
                    <div class="social-card"
                        style="background: linear-gradient(135deg, #00A1D6 0%, #0084B4 100%); padding: 25px; border-radius: var(--border-radius); text-align: center; color: white; cursor: pointer;"
                        onclick="window.open('https://space.bilibili.com/161872957', '_blank')">
                        <div style="font-size: 40px; margin-bottom: 15px;">ğŸ“º</div>
                        <h4 style="margin-bottom: 10px; font-weight: 600;">Bç«™ä¸»é¡µ</h4>
                        <p style="opacity: 0.9; font-size: 14px; margin-bottom: 15px;">è§‚çœ‹æˆ‘çš„ç‚¼é‡‘è§†é¢‘</p>
                        <button class="primary"
                            style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); padding: 8px 20px; font-size: 14px;">
                            è®¿é—®ä¸»é¡µ
                        </button>
                    </div>
                    <div class="social-card"
                        style="background: linear-gradient(135deg, #000000 0%, #333333 100%); padding: 25px; border-radius: var(--border-radius); text-align: center; color: white; cursor: pointer;"
                        onclick="window.open('https://v.douyin.com/mC58bI0Vdmo/ 7@9.com :1pm', '_blank')">
                        <div style="font-size: 40px; margin-bottom: 15px;">ğŸµ</div>
                        <h4 style="margin-bottom: 10px; font-weight: 600;">æŠ–éŸ³è´¦å·</h4>
                        <p style="opacity: 0.9; font-size: 14px; margin-bottom: 15px;">å…³æ³¨æˆ‘çš„æŠ–éŸ³</p>
                        <button class="primary"
                            style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); padding: 8px 20px; font-size: 14px;">
                            è®¿é—®è´¦å·
                        </button>
                    </div>
                    <div class="social-card"
                        style="background: linear-gradient(135deg, #FF6B35 0%, #FF8E53 100%); padding: 25px; border-radius: var(--border-radius); text-align: center; color: white; cursor: pointer;"
                        onclick="window.open('https://buff.163.com/shop/U1098252483#tab=selling&game=csgo&page_num=1', '_blank')">
                        <div style="font-size: 40px; margin-bottom: 15px;">ğŸ›’</div>
                        <h4 style="margin-bottom: 10px; font-weight: 600;">BUFFå•†åº—</h4>
                        <p style="opacity: 0.9; font-size: 14px; margin-bottom: 15px;">ç‹è²</p>
                        <button class="primary"
                            style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); padding: 8px 20px; font-size: 14px;">
                            è®¿é—®å•†åº—
                        </button>
                    </div>
                    <div class="social-card"
                        style="background: linear-gradient(135deg, #1B2838 0%, #2A475E 100%); padding: 25px; border-radius: var(--border-radius); text-align: center; color: white; cursor: pointer;"
                        onclick="window.open('https://steamcommunity.com/id/98801', '_blank')">
                        <div style="font-size: 40px; margin-bottom: 15px;">ğŸ¯</div>
                        <h4 style="margin-bottom: 10px; font-weight: 600;">Steamä¸»é¡µ</h4>
                        <p style="opacity: 0.9; font-size: 14px; margin-bottom: 15px;">æ·»åŠ æˆ‘ä¸ºæ¸¸æˆå¥½å‹</p>
                        <button class="primary"
                            style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); padding: 8px 20px; font-size: 14px;">
                            è®¿é—®ä¸»é¡µ
                        </button>
                    </div>

                </div>
                <div
                    style="margin-top: 30px; padding: 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: var(--border-radius); color: white; text-align: center;">
                    <p style="margin-bottom: 20px; opacity: 0.9; line-height: 1.6; font-size: 16px;">
                        æ„Ÿè°¢ä½ çš„ä½¿ç”¨ï¼å¦‚æœè¿™ä¸ªå·¥å…·å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸Šå¹³å°å…³æ³¨æˆ‘ã€‚<br>
                        Qç¾¤äº¤æµï¼š6800808
                    </p>
                </div>

                <div style="margin-top: 25px; text-align: center; color: var(--secondary-color); font-size: 13px;">
                    <p>æ„Ÿè°¢æ¯ä¸€ä½ä½¿ç”¨è€…ï¼Œæ„Ÿè°¢æˆ‘çš„ç²‰ä¸</p>
                </div>
            </div>
        </div>

        <script>
            let MATERIAL_COUNT = 5;
            let MATERIAL_TYPE_COUNT = 1;
            let materialData = {};
            let calculationStartTime = 0;
            let calculationStats = {
                total: 0,
                processed: 0,
                found: 0
            };
            let searchTerm = '';
            let currentSearchIndex = -1;
            let searchResults = [];

            const DEFAULT_VALUES = {
                MIN_WEAR: '0.00',
                MAX_WEAR: '0.80',
                SPECIFICITY: '0.00000001'
            };

            const Utils = {
                getIEEE754: function (x) {
                    var float = new Float32Array(1);
                    float[0] = x;
                    return float[0];
                },

                combinations: function (n, k) {
                    if (k > n) return 0;
                    if (k === 0 || k === n) return 1;

                    k = Math.min(k, n - k);
                    let result = 1;
                    for (let i = 1; i <= k; i++) {
                        result = result * (n - k + i) / i;
                    }
                    return Math.round(result);
                }
            };

            function showMessage(message, type = 'info') {
                const toast = document.getElementById('messageToast');
                toast.textContent = message;
                toast.className = 'message-toast';
                toast.classList.add(type);
                toast.classList.add('show');

                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }

            function setLoadingState(loading) {
                const buttons = document.querySelectorAll('button');
                buttons.forEach(btn => {
                    if (!btn.classList.contains('tabButton')) {
                        btn.disabled = loading;
                    }
                });

                if (loading) {
                    document.body.classList.add('loading');
                } else {
                    document.body.classList.remove('loading');
                }
            }

            function updateStats() {
                document.getElementById('totalCombinations').textContent = calculationStats.total.toLocaleString();
                document.getElementById('processedCombinations').textContent = calculationStats.processed.toLocaleString();
                document.getElementById('foundResults').textContent = calculationStats.found.toLocaleString();

                if (calculationStartTime > 0) {
                    const elapsed = Math.round((Date.now() - calculationStartTime) / 1000);
                    document.getElementById('timeElapsed').textContent = `${elapsed}s`;
                }
            }

            function initSearch() {
                const searchContainer = document.createElement('div');
                searchContainer.className = 'search-container';
                searchContainer.style.cssText = `
                margin: 15px 0;
                padding: 15px;
                background: #f8f9fa;
                border-radius: 8px;
                border: 1px solid #dee2e6;
            `;

                searchContainer.innerHTML = `
                <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                    <input type="text" id="searchInput" placeholder="åœ¨ç»“æœä¸­æœç´¢..." 
                           style="flex: 1; min-width: 200px; padding: 8px 12px; border: 1px solid #ccc; border-radius: 4px;">
                    <button onclick="performSearch()" class="primary" style="padding: 8px 16px;">æœç´¢</button>
                    <button onclick="prevSearch()" class="secondary" style="padding: 8px 12px;">ä¸Šä¸€ä¸ª</button>
                    <button onclick="nextSearch()" class="secondary" style="padding: 8px 12px;">ä¸‹ä¸€ä¸ª</button>
                    <span id="searchStatus" style="color: #666; font-size: 14px;">æœªæœç´¢</span>
                </div>
            `;

                const combinationsText = document.getElementById("fcCombinationsText");
                combinationsText.parentNode.insertBefore(searchContainer, combinationsText);
                document.getElementById('searchInput').addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
            }

            function performSearch() {
                const searchInput = document.getElementById('searchInput');
                searchTerm = searchInput.value.trim();

                if (!searchTerm) {
                    showMessage('è¯·è¾“å…¥æœç´¢å†…å®¹', 'error');
                    document.querySelectorAll('.search-highlight').forEach(el => {
                        el.classList.remove('search-highlight');
                    });
                    document.getElementById('searchStatus').textContent = 'æœªæœç´¢';
                    return;
                }

                const results = document.querySelectorAll('.real-time-result');
                searchResults = [];

                results.forEach((result, index) => {
                    if (result.textContent.toLowerCase().includes(searchTerm.toLowerCase())) {
                        searchResults.push(index);
                    }
                });

                const searchStatus = document.getElementById('searchStatus');
                if (searchResults.length === 0) {
                    searchStatus.textContent = `æœªæ‰¾åˆ°åŒ…å« "${searchTerm}" çš„ç»“æœ`;
                    searchStatus.style.color = '#dc3545';
                    currentSearchIndex = -1;
                    document.querySelectorAll('.search-highlight').forEach(el => {
                        el.classList.remove('search-highlight');
                    });
                } else {
                    searchStatus.textContent = `æ‰¾åˆ° ${searchResults.length} ä¸ªç»“æœ`;
                    searchStatus.style.color = '#28a745';
                    currentSearchIndex = 0;
                    highlightCurrentSearch();
                }
            }

            function prevSearch() {
                if (searchResults.length === 0) return;

                currentSearchIndex = (currentSearchIndex - 1 + searchResults.length) % searchResults.length;
                highlightCurrentSearch();
            }

            function nextSearch() {
                if (searchResults.length === 0) return;

                currentSearchIndex = (currentSearchIndex + 1) % searchResults.length;
                highlightCurrentSearch();
            }

            function highlightCurrentSearch() {
                document.querySelectorAll('.search-highlight').forEach(el => {
                    el.classList.remove('search-highlight');
                });

                if (currentSearchIndex >= 0 && currentSearchIndex < searchResults.length) {
                    const results = document.querySelectorAll('.real-time-result');
                    const currentResult = results[searchResults[currentSearchIndex]];

                    currentResult.classList.add('search-highlight');

                    currentResult.scrollIntoView({ behavior: 'smooth', block: 'center' });

                    document.getElementById('searchStatus').textContent =
                        `æ‰¾åˆ° ${searchResults.length} ä¸ªç»“æœ (${currentSearchIndex + 1}/${searchResults.length})`;
                }
            }

            let batchResults = [];
            const BATCH_SIZE = 1000;

            function addToBatch(wear, materialsText, isExactMatch) {
                const wearClass = isExactMatch ? 'exact-match-highlight' : 'normal-wear';

                batchResults.push(`
        <div class="real-time-result">
            <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                <div style="flex-shrink: 0;">
                    <strong>ç£¨æŸ:</strong> <span class="${wearClass}">${wear}</span>
                </div>
                <div style="flex: 1; min-width: 200px;">
                    <strong>ç»„åˆ:</strong> ${materialsText}
                </div>
            </div>
        </div>
    `);

                if (batchResults.length >= BATCH_SIZE) {
                    flushBatch();
                }
            }

            function flushBatch() {
                if (batchResults.length === 0) return;

                const combinationstext = document.getElementById("fcCombinationsText");

                const fragment = document.createDocumentFragment();
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = batchResults.join('');

                while (tempDiv.firstChild) {
                    fragment.appendChild(tempDiv.firstChild);
                }

                combinationstext.appendChild(fragment);
                combinationstext.scrollTop = combinationstext.scrollHeight;

                batchResults = [];
            }

            function initMaterialTypes() {
                for (let i = 1; i <= 5; i++) {
                    if (!materialData[i]) {
                        materialData[i] = {
                            input: '',
                            output: '',
                            cumulative: '',
                            minWear: DEFAULT_VALUES.MIN_WEAR,
                            maxWear: DEFAULT_VALUES.MAX_WEAR
                        };
                    }
                }

                const selectElement = document.getElementById('materialTypeCountSelect');
                if (selectElement) {
                    selectElement.value = '1';
                    MATERIAL_TYPE_COUNT = 1;
                }
            }

            function saveMaterialData(index) {
                if (materialData[index]) {
                    materialData[index].input = document.getElementById(`fcAltInput${index}`)?.value || '';
                    materialData[index].output = document.getElementById(`fcOutput${index}`)?.value || '';
                    materialData[index].cumulative = document.getElementById(`fcCumulative${index}`)?.value || '';
                    materialData[index].minWear = document.getElementById(`materialMinWear${index}`)?.value || DEFAULT_VALUES.MIN_WEAR;
                    materialData[index].maxWear = document.getElementById(`materialMaxWear${index}`)?.value || DEFAULT_VALUES.MAX_WEAR;
                }
            }

            function restoreMaterialData(index) {
                if (materialData[index]) {
                    const inputElem = document.getElementById(`fcAltInput${index}`);
                    const outputElem = document.getElementById(`fcOutput${index}`);
                    const cumulativeElem = document.getElementById(`fcCumulative${index}`);
                    const minWearElem = document.getElementById(`materialMinWear${index}`);
                    const maxWearElem = document.getElementById(`materialMaxWear${index}`);

                    if (inputElem) inputElem.value = materialData[index].input;
                    if (outputElem) outputElem.value = materialData[index].output;
                    if (cumulativeElem) cumulativeElem.value = materialData[index].cumulative;
                    if (minWearElem) minWearElem.value = materialData[index].minWear;
                    if (maxWearElem) maxWearElem.value = materialData[index].maxWear;
                }
            }

            function updateMaterialCount() {
                MATERIAL_COUNT = parseInt(document.getElementById('materialCountSelect').value);
                console.log("ææ–™æ•°é‡å·²æ›´æ–°ä¸º:", MATERIAL_COUNT);
                fcUpdateCombinations();
            }

            function updateMaterialTypeCount() {
                const newCount = parseInt(document.getElementById('materialTypeCountSelect').value);

                for (let i = 1; i <= MATERIAL_TYPE_COUNT; i++) {
                    saveMaterialData(i);
                }

                MATERIAL_TYPE_COUNT = newCount;
                const containers = document.getElementById('materialTypeContainers');
                containers.innerHTML = '';

                for (let i = 1; i <= newCount; i++) {
                    createMaterialTypeContainer(i);
                }
            }

            function createMaterialTypeContainer(index) {
                const containers = document.getElementById('materialTypeContainers');

                const container = document.createElement('div');
                container.className = 'material-type-container';
                container.id = `materialType${index}`;
                container.innerHTML = `
                <div class="material-type-header">
                    <div class="material-type-color material-type-${index}"></div>
                    <h4>ææ–™ç§ç±» ${index}</h4>
                </div>
                <textarea id="fcAltInput${index}" class="material-type-textarea" placeholder="è¾“å…¥ææ–™ç§ç±» ${index} çš„ç£¨æŸæ•°æ®..."></textarea>
                <div class="material-type-buttons">
                    <button class="primary" onclick="extractAndShowFloats(${index})">æå–æ•°æ®</button>
                </div>
                <textarea id="fcOutput${index}" class="material-type-output" readonly placeholder="æå–çš„ææ–™æ•°æ®å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ"></textarea>
                <textarea id="fcCumulative${index}" class="material-type-output" readonly placeholder="ç´¯è®¡çš„ææ–™æ•°æ®å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ"></textarea>
                <div class="material-type-buttons">
                    <button class="secondary" onclick="copyResults(${index})">å¤åˆ¶æ•°æ®</button>
                    <button class="primary" onclick="mergeToTotalInput(${index})">æ±‡æ€»æ•°æ®</button>
                    <button class="secondary" onclick="clearMaterialType(${index})">æ¸…é™¤æ•°æ®</button>
                </div>
                <div class="material-wear-range">
                    <div>
                        <h4>ææ–™æœ€å°ç£¨æŸ</h4>
                        <input id="materialMinWear${index}" value="${DEFAULT_VALUES.MIN_WEAR}" placeholder="æœ€å°ç£¨æŸ" />
                    </div>
                    <div>
                        <h4>ææ–™æœ€å¤§ç£¨æŸ</h4>
                        <input id="materialMaxWear${index}" value="${DEFAULT_VALUES.MAX_WEAR}" placeholder="æœ€å¤§ç£¨æŸ" />
                    </div>
                </div>
            `;
                containers.appendChild(container);
                restoreMaterialData(index);
            }

            function normalizeMaterialWear(wearValue, materialTypeIndex) {
                const materialMinWear = Utils.getIEEE754(Number(document.getElementById(`materialMinWear${materialTypeIndex}`).value) || 0.00);
                const materialMaxWear = Utils.getIEEE754(Number(document.getElementById(`materialMaxWear${materialTypeIndex}`).value) || 0.80);

                const normalized = Utils.getIEEE754((wearValue - materialMinWear) / (materialMaxWear - materialMinWear));
                return normalized;
            }

            function mergeToTotalInput(materialTypeIndex) {
                const cumulativeResults = document.getElementById(`fcCumulative${materialTypeIndex}`).value;
                const totalInput = document.getElementById("fcAltInput");

                if (!cumulativeResults) {
                    showMessage(`ææ–™ç§ç±» ${materialTypeIndex} æ²¡æœ‰æ•°æ®å¯æ±‡æ€»`, 'error');
                    return;
                }

                const markedData = cumulativeResults.split(',').map(item => {
                    const trimmed = item.trim();
                    return trimmed ? `${trimmed}|${materialTypeIndex}` : '';
                }).filter(item => item).join(', ');

                const currentTotalData = totalInput.value.split(',').map(item => {
                    const parts = item.trim().split('|');
                    return parts[0];
                }).filter(item => item);

                const cumulativeArray = cumulativeResults.split(',').map(item => item.trim()).filter(item => item);
                const existingSet = new Set(currentTotalData);
                const newData = cumulativeArray.filter(item => !existingSet.has(item));

                if (newData.length === 0) {
                    showMessage(`ææ–™ç§ç±» ${materialTypeIndex} çš„æ•°æ®å·²ç»å…¨éƒ¨æ±‡æ€»è¿‡äº†`, 'info');
                    return;
                }

                const newMarkedData = newData.map(item => `${item}|${materialTypeIndex}`).join(', ');

                if (totalInput.value) {
                    totalInput.value += ", " + newMarkedData;
                } else {
                    totalInput.value = newMarkedData;
                }

                showMessage(`ææ–™ç§ç±» ${materialTypeIndex} çš„ ${newData.length} æ¡æ–°æ•°æ®å·²æ±‡æ€»åˆ°æ€»æ•°æ®ä¸­`, 'success');
            }

            function validateInputs() {
                const maxWear = parseFloat(document.getElementById('fcCmaxwearinput').value);
                const minWear = parseFloat(document.getElementById('fcCminwearinput').value);
                const desiredFloat = parseFloat(document.getElementById('fcCdesiredfloatinput').value);
                const specificity = parseFloat(document.getElementById('fcCspecificityinput').value);

                if (isNaN(maxWear) || isNaN(minWear) || isNaN(desiredFloat) || isNaN(specificity)) {
                    showMessage('è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å€¼', 'error');
                    return false;
                }

                if (minWear >= maxWear) {
                    showMessage('æœ€å°ç£¨æŸå¿…é¡»å°äºæœ€å¤§ç£¨æŸ', 'error');
                    return false;
                }

                if (specificity === 0 && isNaN(desiredFloat)) {
                    showMessage('ç²¾ç¡®åº¦ä¸º0æ—¶ï¼Œå¿…é¡»è¾“å…¥æœ‰æ•ˆçš„ç›®æ ‡ç£¨æŸå€¼', 'error');
                    return false;
                }

                return true;
            }

            async function fcGetCombinations(arr, originalArr, materialTypes) {
                batchResults = [];

                const combinationstext = document.getElementById("fcCombinationsText");
                const progress_bar = document.getElementById("fcProgressBar");
                const total_combos = Utils.combinations(arr.length, MATERIAL_COUNT);
                const max_wear = Utils.getIEEE754(Number(document.getElementById('fcCmaxwearinput').value));
                const min_wear = Utils.getIEEE754(Number(document.getElementById('fcCminwearinput').value));
                const desired_ieee = Utils.getIEEE754(Number(document.getElementById('fcCdesiredfloatinput').value));
                const desired_float = Number(document.getElementById('fcCdesiredfloatinput').value);
                const specificity = Number(document.getElementById('fcCspecificityinput').value);

                calculationStats.total = total_combos;
                calculationStats.processed = 0;
                calculationStats.found = 0;
                updateStats();

                let progress = 0;
                let bestWear = 1000;
                let lastUpdateTime = Date.now();

                const rows = [];
                const positions = [];

                for (let i = 0; i < MATERIAL_COUNT; i++) {
                    const copy = arr.slice(0);
                    rows.push(copy);
                    positions.push(i);
                }

                let done = false;

                while (!done) {
                    let combo = [];
                    let originalCombo = [];
                    let materialTypeCombo = [];

                    for (let row = 0; row < rows.length; row++) {
                        combo.push(rows[row][positions[row]]);
                        originalCombo.push(originalArr[positions[row]]);
                        materialTypeCombo.push(materialTypes[positions[row]]);
                    }

                    let undefinedCount = 0;
                    for (let i = 0; i < combo.length; i++) {
                        if (combo[i] === undefined) {
                            undefinedCount++;
                        }
                    }
                    if (undefinedCount >= MATERIAL_COUNT) {
                        done = true;
                    }

                    if (combo.indexOf(undefined) < 0) {
                        let normalizedSum = 0;
                        for (let i = 0; i < MATERIAL_COUNT; i++) {
                            normalizedSum = Utils.getIEEE754(normalizedSum + combo[i]);
                        }

                        let avgNormalized = Utils.getIEEE754(normalizedSum / Utils.getIEEE754(MATERIAL_COUNT));
                        let wear = Utils.getIEEE754(min_wear + Utils.getIEEE754(avgNormalized * Utils.getIEEE754(max_wear - min_wear)));

                        const isExactMatch = (specificity === 0 && wear == desired_ieee) ||
                            (specificity === 0 && truncateDecimals(wear, countDecimals(desired_float)) == desired_float) ||
                            (wear == desired_ieee); 

                        if (isExactMatch || (wear >= desired_ieee && wear <= (Number(desired_ieee) + Number(specificity)))) {
                            const materialsText = originalCombo.map((val, index) => {
                                const typeIndex = materialTypeCombo[index];
                                return `<span class="text-material-type-${typeIndex}">${Utils.getIEEE754(val)}</span>`;
                            }).join(' + ');

                            addToBatch(wear, materialsText, isExactMatch);
                            calculationStats.found++;

                            if (wear < bestWear) {
                                bestWear = wear;
                            }
                        }

                        progress++;
                        calculationStats.processed = progress;
                    }

                    positions[rows.length - 1]++;
                    for (let a = positions.length - 1; a >= 0; a -= 1) {
                        if (positions[a] >= arr.length) {
                            if (a - 1 >= 0) {
                                positions[a - 1]++;
                                for (let b = a; b < positions.length; b++) {
                                    positions[b] = positions[b - 1] + 1;
                                }
                            }
                        }
                    }

                    const currentTime = Date.now();
                    if (currentTime - lastUpdateTime > 100 || progress % 500000 === 0) {
                        const percent_done = ((progress / total_combos) * 100).toFixed(2);
                        progress_bar.style.width = percent_done + '%';
                        updateStats();
                        lastUpdateTime = currentTime;

                        flushBatch();

                        if (progress % 500000 === 0) {
                            await new Promise(resolve => setTimeout(resolve, 10));
                        }
                    }

                    if (progress >= total_combos) {
                        done = true;
                    }
                }

                flushBatch();
                progress_bar.style.width = '100%';
                setLoadingState(false);
                updateStats();

                if (calculationStats.found === 0) {
                    combinationstext.innerHTML = '<div style="text-align: center; padding: 20px; color: #dc3545;">æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ç»„åˆ</div>';
                } else {
                    showMessage(`è®¡ç®—å®Œæˆ! å…±æ‰¾åˆ° ${calculationStats.found.toLocaleString()} ä¸ªç»“æœ`, 'success');
                }
            }

            function fcCombinations() {
                if (!validateInputs()) return;

                calculationStartTime = Date.now();
                setLoadingState(true);

                fcProgressBar.style.width = '0%';

                const altFloats = document.getElementById("fcAltInput").value;

                let originalFloatList = [];
                let floatList = [];
                let materialTypeList = [];

                if (altFloats && altFloats.trim() !== '') {
                    altFloats.split(',').forEach(item => {
                        const parts = item.trim().split('|');
                        const current = parseFloat(parts[0]);
                        const materialType = parts[1] ? parseInt(parts[1]) : 1;

                        if (!isNaN(current) && current % 1 !== 0) {
                            originalFloatList.push(current);
                            floatList.push(normalizeMaterialWear(current, materialType));
                            materialTypeList.push(materialType);
                        }
                    });
                } else {
                    showMessage('è¯·å…ˆåœ¨æ•°æ®å¤„ç†æ¡†ä¸­è¾“å…¥ææ–™æ•°æ®ï¼', 'error');
                    setLoadingState(false);
                    return;
                }

                if (floatList.length >= MATERIAL_COUNT) {
                    const totalCombos = Utils.combinations(floatList.length, MATERIAL_COUNT);
                    fcTotalCombosText.textContent = `å¯èƒ½æœ‰è¿™ä¹ˆå¤šç»“æœ: ${totalCombos} (å®é™…ææ–™æ•°: ${floatList.length})`;

                    fcGetCombinations(floatList, originalFloatList, materialTypeList);
                } else {
                    showMessage(`æœ€å°‘éœ€è¦è¾“å…¥${MATERIAL_COUNT}ä¸ªææ–™ï¼Œæˆ–è€…å“ªé‡Œæé”™å’¯?`, 'error');
                    setLoadingState(false);
                }
            }

            function fcUpdateCombinations() {
                const totalcombostext = document.getElementById("fcTotalCombosText");
                const altFloats = document.getElementById("fcAltInput").value;

                let float_list = [];

                if (altFloats && altFloats.trim() !== '') {
                    altFloats.split(',').forEach(item => {
                        const parts = item.trim().split('|');
                        const current = parseFloat(parts[0]);
                        if (!isNaN(current) && current % 1 !== 0) {
                            float_list.push(current);
                        }
                    });
                }

                if (float_list.length >= MATERIAL_COUNT) {
                    const total_combos = Utils.combinations(float_list.length, MATERIAL_COUNT);
                    totalcombostext.innerHTML = "å¯èƒ½æœ‰è¿™ä¹ˆå¤šç»“æœ: " + total_combos;
                } else {
                    totalcombostext.innerHTML = "ç­‰å¾…è®¡ç®—...";
                }
            }

            function extractFloats(input) {
                const regex = /\b0\.\d{4,}\b/g;
                const matches = input.match(regex);
                return matches ? matches.join(", ") : null;
            }

            function extractAndShowFloats(materialTypeIndex) {
                const inputText = document.getElementById(`fcAltInput${materialTypeIndex}`).value;
                const outputText = document.getElementById(`fcOutput${materialTypeIndex}`);
                const cumulativeResults = document.getElementById(`fcCumulative${materialTypeIndex}`);

                const extractedFloats = extractFloats(inputText);
                if (!extractedFloats) {
                    showMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ç£¨æŸæ•°æ®', 'error');
                    return;
                }

                outputText.value = extractedFloats;

                if (cumulativeResults.value) {
                    cumulativeResults.value += ", " + extractedFloats;
                } else {
                    cumulativeResults.value = extractedFloats;
                }

                document.getElementById(`fcAltInput${materialTypeIndex}`).value = "";

                saveMaterialData(materialTypeIndex);
                showMessage(`ææ–™ç§ç±» ${materialTypeIndex} æ•°æ®æå–æˆåŠŸ`, 'success');
            }

            function copyResults(materialTypeIndex) {
                const cumulativeResults = document.getElementById(`fcCumulative${materialTypeIndex}`);
                cumulativeResults.select();
                cumulativeResults.setSelectionRange(0, 99999);
                document.execCommand("copy");
                showMessage(`ææ–™ç§ç±» ${materialTypeIndex} æ•°æ®å·²å¤åˆ¶`, 'success');
            }

            function clearMaterialType(materialTypeIndex) {
                document.getElementById(`fcAltInput${materialTypeIndex}`).value = "";
                document.getElementById(`fcOutput${materialTypeIndex}`).value = "";
                document.getElementById(`fcCumulative${materialTypeIndex}`).value = "";

                saveMaterialData(materialTypeIndex);
                showMessage(`ææ–™ç§ç±» ${materialTypeIndex} æ•°æ®å·²æ¸…é™¤`, 'info');
            }

            function clearAllMaterialTypes() {
                for (let i = 1; i <= MATERIAL_TYPE_COUNT; i++) {
                    document.getElementById(`fcAltInput${i}`).value = "";
                    document.getElementById(`fcOutput${i}`).value = "";
                    document.getElementById(`fcCumulative${i}`).value = "";
                    saveMaterialData(i);
                }
                document.getElementById("fcAltInput").value = "";
                document.getElementById("fcTotalCombosText").textContent = "ç­‰å¾…è®¡ç®—...";
                document.getElementById("fcCombinationsText").innerHTML = "";
                document.getElementById("fcProgressBar").style.width = '0%';
                calculationStats.total = 0;
                calculationStats.processed = 0;
                calculationStats.found = 0;
                updateStats();
                showMessage('æ‰€æœ‰ææ–™æ•°æ®å·²æ¸…é™¤', 'info');
            }

            function updateIeeeRange() {
                const desiredFloat = Number(document.getElementById("desiredIEEEInput").value);
                const desiredIEEE = Utils.getIEEE754(desiredFloat);
                document.getElementById("floatIEEEInput").value = desiredIEEE;

                let minIEEE = desiredIEEE;
                while (Utils.getIEEE754(minIEEE - 0.0000000000001) === desiredIEEE) {
                    minIEEE -= 0.0000000000001;
                }
                document.getElementById("minIEEEinput").value = minIEEE;

                let maxIEEE = desiredIEEE;
                while (Utils.getIEEE754(maxIEEE + 0.0000000000001) === desiredIEEE) {
                    maxIEEE += 0.0000000000001;
                }
                document.getElementById("maxIEEEinput").value = maxIEEE;

                document.getElementById("middleIEEEinput").value = (minIEEE + maxIEEE) / 2;
            }

            function openTab(tabName) {
                var i, tabcontent, tabbutton;
                tabcontent = document.getElementsByClassName("tabcontent");
                tabbutton = document.getElementsByClassName("tabButton");
                for (i = 0; i < tabcontent.length; i++) {
                    tabcontent[i].style.display = "none";
                    tabbutton[i].classList.remove('active');
                }
                document.getElementById(tabName).style.display = "block";
                event.currentTarget.classList.add('active');
            }

            truncateDecimals = function (number, digits) {
                var multiplier = Math.pow(10, digits),
                    adjustedNum = number * multiplier,
                    truncatedNum = Math[adjustedNum < 0 ? 'ceil' : 'floor'](adjustedNum);
                return truncatedNum / multiplier;
            };

            var countDecimals = function (value) {
                if (Math.floor(value) === value) return 0;
                return value.toString().split(".")[1].length || 0;
            }

            document.addEventListener('DOMContentLoaded', function () {
                initMaterialTypes();
            });
        </script>
</body>

</html>